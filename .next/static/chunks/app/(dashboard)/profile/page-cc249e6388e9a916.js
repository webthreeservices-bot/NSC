(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8300],{439:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(78340).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},4474:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var n=r(95155),o=r(12115),l=r(42442),s=r(18460),a=r(91337);let i=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#00ff00] focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-[#00ff00] text-black hover:bg-[#00cc00] shadow-md hover:shadow-lg",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border-2 border-[#00ff00] bg-transparent text-[#00ff00] hover:bg-[#00ff00] hover:text-black",secondary:"bg-gray-800 text-white hover:bg-gray-700",ghost:"text-gray-300 hover:bg-gray-800 hover:text-white",link:"text-[#00ff00] underline-offset-4 hover:underline hover:text-[#00cc00]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef(({className:e,variant:t,size:r,asChild:o=!1,...s},c)=>{let d=o?l.DX:"button";return(0,n.jsx)(d,{className:(0,a.cn)(i({variant:t,size:r,className:e})),ref:c,...s})});c.displayName="Button"},18460:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var n=r(29722);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=n.$,s=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(e=>{let t=null==r?void 0:r[e],n=null==a?void 0:a[e];if(null===t)return null;let l=o(t)||o(n);return s[e][l]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return l(e,i,null==t||null==(n=t.compoundVariants)?void 0:n.reduce((e,t)=>{let{class:r,className:n,...o}=t;return Object.entries(o).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...c}[t]):({...a,...c})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},24465:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(95155),o=r(12115),l=r(42869),s=r(439);let a=(0,r(78340).A)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=r(4474),c=r(39658),d=r(79792),u=r(35082),f=r(81890),m=r(80840);function p(){let{success:e,error:t}=(0,f.d)(),[r,p]=(0,o.useState)(null),[g,h]=(0,o.useState)(!0),[y,x]=(0,o.useState)(!1),[b,v]=(0,o.useState)({fullName:"",phone:"",bep20Address:"",trc20Address:""});(0,o.useEffect)(()=>{let e=new AbortController;return(async()=>{try{let t=(0,u.LJ)(),r=await fetch("/api/user/profile",{headers:{Authorization:`Bearer ${t}`},signal:e.signal}),n=await r.json();n?.success&&n?.user?(p(n.user),v({fullName:n.user?.fullName||"",phone:n.user?.phone||"",bep20Address:n.user?.bep20Address||"",trc20Address:n.user?.trc20Address||""})):console.error("Profile fetch failed:",n)}catch(e){"AbortError"!==e.name&&console.error("Error fetching profile:",e)}finally{e.signal.aborted||h(!1)}})(),()=>{e.abort()}},[]);let N=async r=>{r.preventDefault(),x(!0);let n=new AbortController;try{let r=(0,u.LJ)(),o=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(b),signal:n.signal}),l=await o.json();if(l?.success&&l?.user)p(l.user),e("Profile updated successfully!");else{let e=l?.message||l?.error||l?.details||"Failed to update profile";t(e),console.error("Profile update error:",l)}}catch(e){"AbortError"!==e.name&&(console.error("Error updating profile:",e),t("Failed to update profile"))}finally{n.signal.aborted||x(!1)}},w=(e,t)=>{v(r=>({...r,[e]:t}))};return g?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-96",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-gray-800 border-t-[#00ff00]"})}):(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Profile Settings"})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-20 h-20 bg-[#00ff00] rounded-full flex items-center justify-center mx-auto mb-4",children:(0,n.jsx)(l.A,{className:"h-10 w-10 text-black"})}),(0,n.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:r?.fullName||r?.username||"User"}),(0,n.jsx)("p",{className:"text-gray-400 mb-4",children:r?.email}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Account Status:"}),(0,n.jsxs)("span",{className:`flex items-center gap-1 ${r?.isActive?"text-[#00ff00]":"text-red-400"}`,children:[(0,n.jsx)(s.A,{className:"h-4 w-4"}),r?.isActive?"Active":"Inactive"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Email Verified:"}),(0,n.jsxs)("span",{className:`flex items-center gap-1 ${r?.isEmailVerified?"text-[#00ff00]":"text-yellow-400"}`,children:[(0,n.jsx)(a,{className:"h-4 w-4"}),r?.isEmailVerified?"Verified":"Pending"]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"KYC Status:"}),(0,n.jsx)("span",{className:`
                    px-2 py-1 rounded-full text-xs font-medium
                    ${r?.kycStatus==="APPROVED"?"bg-green-900 text-green-400":r?.kycStatus==="REJECTED"?"bg-red-900 text-red-400":"bg-yellow-900 text-yellow-400"}
                  `,children:r?.kycStatus})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Member Since:"}),(0,n.jsx)("span",{className:"text-white",children:(0,m.Yq)(r?.createdAt,void 0,"Unknown")})]})]})]})})}),(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-6",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-white mb-6",children:"Update Profile Information"}),(0,n.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.J,{htmlFor:"fullName",className:"text-gray-300",children:"Full Name"}),(0,n.jsx)(c.p,{id:"fullName",type:"text",placeholder:"Enter your full name",value:b.fullName,onChange:e=>w("fullName",e.target.value),className:"bg-black border-gray-700 text-white"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.J,{htmlFor:"phone",className:"text-gray-300",children:"Phone Number"}),(0,n.jsx)(c.p,{id:"phone",type:"tel",placeholder:"Enter your phone number",value:b.phone,onChange:e=>w("phone",e.target.value),className:"bg-black border-gray-700 text-white"})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.J,{htmlFor:"bep20Address",className:"text-gray-300",children:"BEP20 Wallet Address (BSC)"}),(0,n.jsx)(c.p,{id:"bep20Address",type:"text",placeholder:"0x... (Your BSC wallet address)",value:b.bep20Address,onChange:e=>w("bep20Address",e.target.value),className:"bg-black border-gray-700 text-white font-mono text-sm"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Used for BEP20 withdrawals"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.J,{htmlFor:"trc20Address",className:"text-gray-300",children:"TRC20 Wallet Address (TRON)"}),(0,n.jsx)(c.p,{id:"trc20Address",type:"text",placeholder:"T... (Your TRON wallet address)",value:b.trc20Address,onChange:e=>w("trc20Address",e.target.value),className:"bg-black border-gray-700 text-white font-mono text-sm"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Used for TRC20 withdrawals"})]}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsx)(i.$,{type:"submit",disabled:y,className:"bg-[#00ff00] hover:bg-[#00cc00] text-black font-bold",children:y?"Saving...":"Update Profile"})})]})]})})]})]})}},26071:(e,t,r)=>{Promise.resolve().then(r.bind(r,24465))},35082:(e,t,r)=>{"use strict";function n(){try{let e=localStorage.getItem("token");if(!e&&(e=i("token")))try{localStorage.setItem("token",e),console.log("\uD83D\uDD04 Token synced from cookie to localStorage")}catch(e){console.warn("⚠️ Could not sync token to localStorage:",e)}return e?console.log("✅ Token found in storage"):console.log("❌ No token found in storage or cookies"),e}catch(e){return console.error("❌ Error getting token from storage:",e),i("token")}}function o(e){try{localStorage.setItem("token",e),c("token",e,7),console.log("✅ Token stored in localStorage and cookie")}catch(t){console.error("❌ Error storing token:",t);try{c("token",e,7),console.log("✅ Token stored in cookie only")}catch(e){console.error("❌ Failed to store token anywhere:",e)}}}function l(){try{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),d("token"),d("refreshToken"),console.log("✅ All tokens cleared from storage and cookies")}catch(e){console.error("❌ Error clearing tokens:",e)}}function s(){try{let e=localStorage.getItem("refreshToken");if(!e&&(e=i("refreshToken")))try{localStorage.setItem("refreshToken",e)}catch(e){}return e}catch(e){return i("refreshToken")}}function a(e){try{localStorage.setItem("refreshToken",e),c("refreshToken",e,30)}catch(e){}}function i(e){if("undefined"==typeof document)return null;try{let t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length){let e=t.pop();if(e)return e.split(";").shift()||null}return null}catch(e){return null}}function c(e,t,r){if("undefined"!=typeof document)try{let n=new Date;n.setTime(n.getTime()+24*r*36e5),document.cookie=`${e}=${t};expires=${n.toUTCString()};path=/;SameSite=Lax`}catch(e){console.error("Error setting cookie:",e)}}function d(e){if("undefined"!=typeof document)try{document.cookie=`${e}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}catch(e){console.error("Error deleting cookie:",e)}}function u(){let e=n();if(!e)return null;try{let t=e.split(".");if(3!==t.length)return null;let r=t[1];if(!r)return null;let n=r.replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(n).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}catch(e){return console.error("Error decoding token:",e),null}}r.d(t,{C$:()=>o,Do:()=>l,G:()=>s,LJ:()=>n,RX:()=>a,l4:()=>u})},39658:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var n=r(95155),o=r(12115),l=r(91337);let s=o.forwardRef(({className:e,type:t,...r},o)=>(0,n.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...r}));s.displayName="Input"},42442:(e,t,r)=>{"use strict";r.d(t,{DX:()=>u,TL:()=>d});var n,o=r(12115),l=r(47527),s=r(95155),a=Symbol.for("react.lazy"),i=(n||(n=r.t(o,2)))[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===a&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){var t;let r,n=(t=e,(r=o.forwardRef((e,t)=>{let{children:r,...n}=e;if(c(r)&&"function"==typeof i&&(r=i(r._payload)),o.isValidElement(r)){var s;let e,a,i=(s=r,(a=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(a=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),c=function(e,t){let r={...t};for(let n in t){let o=e[n],l=t[n];/^on[A-Z]/.test(n)?o&&l?r[n]=(...e)=>{let t=l(...e);return o(...e),t}:o&&(r[n]=o):"style"===n?r[n]={...o,...l}:"className"===n&&(r[n]=[o,l].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==o.Fragment&&(c.ref=t?(0,l.t)(t,i):i),o.cloneElement(r,c)}return o.Children.count(r)>1?o.Children.only(null):null})).displayName=`${t}.SlotClone`,r),a=o.forwardRef((e,t)=>{let{children:r,...l}=e;c(r)&&"function"==typeof i&&(r=i(r._payload));let a=o.Children.toArray(r),d=a.find(m);if(d){let e=d.props.children,r=a.map(t=>t!==d?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,s.jsx)(n,{...l,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return(0,s.jsx)(n,{...l,ref:t,children:r})});return a.displayName=`${e}.Slot`,a}var u=d("Slot"),f=Symbol("radix.slottable");function m(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},42869:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(78340).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},47527:(e,t,r)=>{"use strict";r.d(t,{s:()=>s,t:()=>l});var n=r(12115);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function l(...e){return t=>{let r=!1,n=e.map(e=>{let n=o(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():o(e[t],null)}}}}function s(...e){return n.useCallback(l(...e),e)}},71023:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var n=r(12115);r(47650);var o=r(42442),l=r(95155),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,o.TL)(`Primitive.${t}`),s=n.forwardRef((e,n)=>{let{asChild:o,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(o?r:t,{...s,ref:n})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),a=n.forwardRef((e,t)=>(0,l.jsx)(s.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var i=a},78340:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(12115);let o=(...e)=>e.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:c,...d},u)=>(0,n.createElement)("svg",{ref:u,...l,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:o("lucide",a),...d},[...c.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(i)?i:[i]])),a=(e,t)=>{let r=(0,n.forwardRef)(({className:r,...l},a)=>(0,n.createElement)(s,{ref:a,iconNode:t,className:o(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,r),...l}));return r.displayName=`${e}`,r}},79792:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var n=r(95155),o=r(12115),l=r(71023),s=r(18460),a=r(91337);let i=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=o.forwardRef(({className:e,...t},r)=>(0,n.jsx)(l.b,{ref:r,className:(0,a.cn)(i(),e),...t}));c.displayName=l.b.displayName},80840:(e,t,r)=>{"use strict";function n(e,t,r="N/A"){if(!e)return r;try{let n;if(e instanceof Date)n=e;else if("string"==typeof e)n=new Date(e);else if("number"==typeof e)n=new Date(e);else{if("object"!=typeof e||null===e)return r;n="function"==typeof e.toISOString?e:new Date(String(e))}if(isNaN(n.getTime())||864e5>n.getTime())return r;return new Intl.DateTimeFormat("en-US",t||{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}).format(n)}catch(t){return console.warn("Date formatting error:",t,"Input:",e),r}}function o(e,t="N/A"){if(!e)return t;try{let r;if(e instanceof Date)r=e;else if("string"==typeof e)r=new Date(e);else if("number"==typeof e)r=new Date(e);else{if("object"!=typeof e||null===e)return t;r="function"==typeof e.toISOString?e:new Date(String(e))}if(isNaN(r.getTime())||864e5>r.getTime())return t;return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"}).format(r)}catch(r){return console.warn("DateTime formatting error:",r,"Input:",e),t}}r.d(t,{Yq:()=>n,r6:()=>o})},81890:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var n=r(66609);function o(){return{toast:n.o,success:e=>n.o.success(e),error:e=>n.o.error(e),warning:e=>n.o.warning(e),info:e=>n.o.info(e)}}},91337:(e,t,r)=>{"use strict";r.d(t,{Yq:()=>a,cn:()=>l,vv:()=>s,zM:()=>i});var n=r(29722),o=r(622);function l(...e){return(0,o.QP)((0,n.$)(e))}function s(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function a(e){if(!e)return"N/A";try{let t;if(e instanceof Date)t=e;else if("string"==typeof e){if(""===e.trim())return"N/A";t=new Date(e)}else if("number"==typeof e){if(e<=0)return"N/A";t=new Date(e)}else if("object"!=typeof e||null===e)return"N/A";else if("function"==typeof e.toISOString)t=e;else if(e.date||e.value)t=new Date(e.date||e.value);else{let r=Object.values(e)[0];t=new Date("string"==typeof r||"number"==typeof r?r:String(e))}if(isNaN(t.getTime())||864e5>t.getTime())return"N/A";return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"}).format(t)}catch(t){return console.warn("Date formatting error:",t,"Date value:",e),"N/A"}}function i(e){try{return localStorage.getItem(e)}catch(e){return console.error("Error accessing localStorage:",e),null}}}},e=>{e.O(0,[8409,6609,8441,3794,7358],()=>e(e.s=26071)),_N_E=e.O()}]);