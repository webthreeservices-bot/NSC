(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{5683:(e,n,r)=>{"use strict";r.d(n,{ErrorSuppressor:()=>t});var o=r(12115);function t(){return(0,o.useEffect)(()=>{window.__NEXT_DATA__=window.__NEXT_DATA__||{},window.next=window.next||{},window.next.router=window.next.router||{};let e=console.error,n=console.warn;console.error=(...n)=>{let r=n.join(" ");r.includes("Cannot update a component")||r.includes("while rendering a different component")||r.includes("AdminLayout")||r.includes("Router")||r.includes("setState() call inside")||r.includes("chrome-extension://")||r.includes("pelagus")||r.includes("quiknode.pro")||r.includes("401")||r.includes("Unauthorized")||r.includes("injectScript.js")||r.includes("inpage.js")||r.includes("Object.connect")||r.includes("async s")||r.includes("__nextjs_original-stack-frame")||r.includes("stack-frame.js")||r.includes("provider-bridge.js")||r.includes("content.js")||r.includes("Cannot read properties of undefined")||r.includes("Cannot read property")||r.includes("is not defined")||r.includes("Error setting cookie")||r.includes("Error deleting cookie")||r.includes("Error decoding token")||r.includes("API Error:")&&(r.includes("{}")||r.includes("[object Object]"))||e.apply(console,n)},console.warn=(...e)=>{let r=e.join(" ");r.includes("chrome-extension://")||r.includes("pelagus")||r.includes("quiknode.pro")||r.includes("Cannot update a component")||r.includes("setState()")||r.includes("while rendering a different component")||r.includes("AdminLayout")||r.includes("Router")||r.includes("provider-bridge.js")||r.includes("MetaMask")||r.includes("Failed to connect")||r.includes("wallet")||r.includes("ethereum")||n.apply(console,e)};let r=e=>{let n=e.reason?.message||e.reason?.toString()||"";if(n.includes("Failed to connect to MetaMask")||n.includes("MetaMask extension not found")||n.includes("chrome-extension://")||n.includes("inpage.js")||n.includes("injectScript.js")||n.includes("Cannot read properties of undefined")||n.includes("Cannot read property"))return void e.preventDefault()},o=e=>{let n=e.message||"",r=e.filename||"";if(n.includes("Cannot read properties of undefined")||n.includes("Cannot read property")||n.includes("is not defined")||n.includes("chrome-extension://")||n.includes("MetaMask")||n.includes("Failed to connect")||n.includes("wallet")||n.toLowerCase().includes("ethereum")||r.includes("chrome-extension://")||r.includes("inpage.js")||r.includes("nkbihfbeogaeaoehlefnkodbefgpgknn"))return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1},t=window.fetch;return window.fetch=function(...e){let n=e[0]?.toString()||"";return n.includes("__nextjs_original-stack-frame")&&(n.includes("chrome-extension")||n.includes("MetaMask")||n.includes("inpage.js"))?Promise.reject(Error("Blocked stack frame request for wallet error")):t.apply(window,e)},window.addEventListener("unhandledrejection",r,!0),window.addEventListener("error",o,!0),()=>{console.error=e,console.warn=n,window.fetch=t,window.removeEventListener("unhandledrejection",r,!0),window.removeEventListener("error",o,!0)}},[]),null}},18112:(e,n,r)=>{"use strict";r.d(n,{GlobalErrorHandler:()=>t});var o=r(12115);function t(){return(0,o.useEffect)(()=>{let e;window.addEventListener("unhandledrejection",e=>{if(console.error("Unhandled promise rejection:",e.reason),e.reason?.message?.includes("MetaMask")||e.reason?.message?.includes("connect")){console.warn("MetaMask error caught globally:",e.reason.message),e.preventDefault();try{let e=new CustomEvent("global-error",{detail:{message:"A wallet connection error occurred. Please refresh the page or try using QR Code payment.",type:"wallet"}});window.dispatchEvent(e)}catch(e){console.error("Failed to dispatch global error event:",e)}return}if(e.reason?.message?.includes("fetch")||e.reason?.message?.includes("network")||e.reason?.code==="ERR_NETWORK"){console.warn("Network error caught globally:",e.reason.message),e.preventDefault();return}}),window.addEventListener("error",e=>{if(e.filename?.includes("chrome-extension")||e.filename?.includes("inpage.js")||e.message?.includes("MetaMask")||e.message?.includes("Failed to connect to MetaMask")||e.message?.toLowerCase().includes("wallet")||e.message?.toLowerCase().includes("ethereum"))return console.warn("\uD83D\uDED1 MetaMask/Wallet extension error intercepted:",e.message),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),console.debug("Error details:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno}),!1},!0),e=console.error,console.error=function(...n){let r=n.join(" ");r.includes("chrome-extension")||r.includes("Failed to connect to MetaMask")||r.includes("inpage.js")?console.debug("\uD83D\uDD15 Suppressed MetaMask extension error:",...n):e.apply(console,n)},console.log("\uD83D\uDEE1️ Global error handlers initialized")},[]),null}},35082:(e,n,r)=>{"use strict";function o(){try{let e=localStorage.getItem("token");if(!e&&(e=a("token")))try{localStorage.setItem("token",e),console.log("\uD83D\uDD04 Token synced from cookie to localStorage")}catch(e){console.warn("⚠️ Could not sync token to localStorage:",e)}return e?console.log("✅ Token found in storage"):console.log("❌ No token found in storage or cookies"),e}catch(e){return console.error("❌ Error getting token from storage:",e),a("token")}}function t(e){try{localStorage.setItem("token",e),c("token",e,7),console.log("✅ Token stored in localStorage and cookie")}catch(n){console.error("❌ Error storing token:",n);try{c("token",e,7),console.log("✅ Token stored in cookie only")}catch(e){console.error("❌ Failed to store token anywhere:",e)}}}function s(){try{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),d("token"),d("refreshToken"),console.log("✅ All tokens cleared from storage and cookies")}catch(e){console.error("❌ Error clearing tokens:",e)}}function i(){try{let e=localStorage.getItem("refreshToken");if(!e&&(e=a("refreshToken")))try{localStorage.setItem("refreshToken",e)}catch(e){}return e}catch(e){return a("refreshToken")}}function l(e){try{localStorage.setItem("refreshToken",e),c("refreshToken",e,30)}catch(e){}}function a(e){if("undefined"==typeof document)return null;try{let n=`; ${document.cookie}`.split(`; ${e}=`);if(2===n.length){let e=n.pop();if(e)return e.split(";").shift()||null}return null}catch(e){return null}}function c(e,n,r){if("undefined"!=typeof document)try{let o=new Date;o.setTime(o.getTime()+24*r*36e5),document.cookie=`${e}=${n};expires=${o.toUTCString()};path=/;SameSite=Lax`}catch(e){console.error("Error setting cookie:",e)}}function d(e){if("undefined"!=typeof document)try{document.cookie=`${e}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}catch(e){console.error("Error deleting cookie:",e)}}function u(){let e=o();if(!e)return null;try{let n=e.split(".");if(3!==n.length)return null;let r=n[1];if(!r)return null;let o=r.replace(/-/g,"+").replace(/_/g,"/"),t=decodeURIComponent(atob(o).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)}catch(e){return console.error("Error decoding token:",e),null}}r.d(n,{C$:()=>t,Do:()=>s,G:()=>i,LJ:()=>o,RX:()=>l,l4:()=>u})},47427:(e,n,r)=>{"use strict";r.d(n,{default:()=>l});var o=r(95155),t=r(12115),s=r(98500),i=r.n(s);function l(){let[e,n]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),[l,a]=(0,t.useState)({necessary:!0,analytics:!1,marketing:!1});(0,t.useEffect)(()=>{let e=null,r=localStorage.getItem("cookieConsent");if(r)try{let e=JSON.parse(r);a(e)}catch(e){console.error("Error parsing cookie preferences:",e)}else e=setTimeout(()=>n(!0),1e3);return()=>{e&&clearTimeout(e)}},[]);let c=()=>{d({necessary:!0,analytics:!0,marketing:!0})},d=e=>{localStorage.setItem("cookieConsent",JSON.stringify(e)),localStorage.setItem("cookieConsentDate",new Date().toISOString()),e.analytics&&console.log("[Cookie Consent] Analytics cookies enabled"),e.marketing&&console.log("[Cookie Consent] Marketing cookies enabled"),n(!1),s(!1)};return e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),(0,o.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 sm:p-6",children:(0,o.jsx)("div",{className:"max-w-6xl mx-auto bg-white rounded-lg shadow-2xl border border-gray-200",children:r?(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,o.jsx)("div",{className:"flex-shrink-0 text-4xl",children:"⚙️"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Cookie Preferences"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm",children:"Choose which cookies you want to accept. Necessary cookies cannot be disabled as they are required for the website to function."})]})]}),(0,o.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("input",{type:"checkbox",checked:!0,disabled:!0,className:"w-5 h-5 rounded border-gray-300"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h4",{className:"font-semibold text-gray-900",children:["Necessary Cookies"," ",(0,o.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:"(Required)"})]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Essential for the website to function. These cookies enable core functionality such as security, authentication, and session management."})]})]})})}),(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("input",{type:"checkbox",checked:l.analytics,onChange:e=>a({...l,analytics:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900",children:"Analytics Cookies"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Help us understand how visitors interact with our website. We use this data to improve user experience and site performance."})]})]})})}),(0,o.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,o.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("input",{type:"checkbox",checked:l.marketing,onChange:e=>a({...l,marketing:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900",children:"Marketing Cookies"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Used to track visitors across websites to display relevant advertisements and measure campaign effectiveness."})]})]})})})]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,o.jsx)("button",{onClick:()=>{d(l)},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors",children:"Save Preferences"}),(0,o.jsx)("button",{onClick:c,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-semibold transition-colors",children:"Accept All"}),(0,o.jsx)("button",{onClick:()=>s(!1),className:"bg-white hover:bg-gray-50 text-gray-700 px-6 py-2 rounded-lg border border-gray-300 font-semibold transition-colors",children:"Back"})]})]}):(0,o.jsx)("div",{className:"p-6",children:(0,o.jsxs)("div",{className:"flex items-start gap-4",children:[(0,o.jsx)("div",{className:"flex-shrink-0 text-4xl",children:"\uD83C\uDF6A"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"We Value Your Privacy"}),(0,o.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:'We use cookies to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. You can customize your preferences or accept only necessary cookies.'}),(0,o.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:["Read our"," ",(0,o.jsx)(i(),{href:"/privacy",className:"text-blue-600 hover:underline font-semibold",children:"Privacy Policy"})," ","and"," ",(0,o.jsx)(i(),{href:"/terms",className:"text-blue-600 hover:underline font-semibold",children:"Terms of Service"})," ","for more information."]}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,o.jsx)("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors",children:"Accept All"}),(0,o.jsx)("button",{onClick:()=>{d({necessary:!0,analytics:!1,marketing:!1})},className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-semibold transition-colors",children:"Necessary Only"}),(0,o.jsx)("button",{onClick:()=>s(!0),className:"bg-white hover:bg-gray-50 text-gray-700 px-6 py-2 rounded-lg border border-gray-300 font-semibold transition-colors",children:"Customize"})]})]})]})})})})]}):null}},66872:()=>{},67509:(e,n,r)=>{Promise.resolve().then(r.bind(r,5683)),Promise.resolve().then(r.t.bind(r,66872,23)),Promise.resolve().then(r.bind(r,47427)),Promise.resolve().then(r.bind(r,18112)),Promise.resolve().then(r.bind(r,90008)),Promise.resolve().then(r.t.bind(r,42593,23)),Promise.resolve().then(r.t.bind(r,76106,23)),Promise.resolve().then(r.bind(r,66609))},90008:(e,n,r)=>{"use strict";r.d(n,{Providers:()=>f});var o=r(95155),t=r(29905),s=r(35625),i=r(12115),l=r(35082),a=r(68215),c=r.n(a),d=r(37206),u=r(41463);let m="true"===u.env.NEXT_PUBLIC_WEB3_DISABLED||"true"===u.env.WEB3_DISABLED,h=m?null:(0,d.default)(()=>Promise.all([r.e(2712),r.e(3778)]).then(r.bind(r,73778)).then(e=>e.WagmiConfig),{loadableGenerated:{webpack:()=>[73778]},ssr:!1});function g({children:e}){let n,r,t;return n=(0,i.useRef)(),r=(0,i.useCallback)(async()=>{try{let e=(0,l.G)();if(!e)return console.log("No refresh token available"),!1;console.log("Attempting to refresh token...");let n=await fetch("/api/auth/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!n.ok)return console.error("Token refresh failed:",n.status,n.statusText),(401===n.status||403===n.status)&&((0,l.Do)(),window.location.href="/login?session_expired=true"),!1;let r=await n.json();if(r.token&&r.refreshToken)return(0,l.C$)(r.token),(0,l.RX)(r.refreshToken),console.log("Token refreshed successfully"),t(r.token),!0;return console.error("Token refresh response missing tokens"),!1}catch(e){return console.error("Error refreshing token:",e),!1}},[]),t=(0,i.useCallback)(e=>{try{let o=c().decode(e);if(!o?.exp)return;let t=Math.floor(Date.now()/1e3),s=o.exp-t,i=Math.max(s-600,120);n.current&&clearTimeout(n.current),console.log(`Scheduling token refresh in ${Math.floor(i/60)} minutes`),n.current=setTimeout(()=>{r()},1e3*i)}catch(e){console.error("Error scheduling token refresh:",e)}},[r]),(0,i.useEffect)(()=>{let e=(0,l.LJ)();return e&&t(e),()=>{n.current&&clearTimeout(n.current)}},[t]),(0,o.jsx)(o.Fragment,{children:e})}function f({children:e}){let[n]=(0,i.useState)(()=>new t.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1,retry:1}}})),[l,a]=(0,i.useState)(null);return(0,i.useEffect)(()=>{m||Promise.all([r.e(2712),r.e(3778),r.e(802),r.e(6780)]).then(r.bind(r,36780)).then(({wagmiConfig:e})=>{a(e)})},[]),(0,o.jsx)(s.Ht,{client:n,children:(0,o.jsx)(g,{children:l?(0,o.jsx)(h,{config:l,children:e}):e})})}}},e=>{e.O(0,[7513,8913,9268,8500,6609,9304,9882,8441,3794,7358],()=>e(e.s=67509)),_N_E=e.O()}]);