{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/components/CookieConsent.tsx"],"sourcesContent":["/**\n * Cookie Consent Banner Component\n * GDPR-compliant cookie consent notification\n */\n\n'use client'\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\n\ninterface CookiePreferences {\n  necessary: boolean // Always true, cannot be disabled\n  analytics: boolean\n  marketing: boolean\n}\n\nexport default function CookieConsent() {\n  const [showBanner, setShowBanner] = useState(false)\n  const [showSettings, setShowSettings] = useState(false)\n  const [preferences, setPreferences] = useState<CookiePreferences>({\n    necessary: true,\n    analytics: false,\n    marketing: false,\n  })\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return\n    \n    let timeoutId: NodeJS.Timeout | null = null\n    \n    // Check if user has already consented\n    const consent = localStorage.getItem('cookieConsent')\n    if (!consent) {\n      // Delay showing banner slightly for better UX\n      timeoutId = setTimeout(() => setShowBanner(true), 1000)\n    } else {\n      // Load saved preferences\n      try {\n        const savedPreferences = JSON.parse(consent)\n        setPreferences(savedPreferences)\n      } catch (error) {\n        console.error('Error parsing cookie preferences:', error)\n      }\n    }\n\n    // Cleanup function\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId)\n      }\n    }\n  }, [])\n\n  const acceptAll = () => {\n    const allAccepted: CookiePreferences = {\n      necessary: true,\n      analytics: true,\n      marketing: true,\n    }\n    savePreferences(allAccepted)\n  }\n\n  const acceptNecessary = () => {\n    const necessaryOnly: CookiePreferences = {\n      necessary: true,\n      analytics: false,\n      marketing: false,\n    }\n    savePreferences(necessaryOnly)\n  }\n\n  const saveCustomPreferences = () => {\n    savePreferences(preferences)\n  }\n\n  const savePreferences = (prefs: CookiePreferences) => {\n    if (typeof window === 'undefined') return\n    \n    // Save to localStorage\n    localStorage.setItem('cookieConsent', JSON.stringify(prefs))\n    localStorage.setItem('cookieConsentDate', new Date().toISOString())\n\n    // Initialize analytics if accepted\n    if (prefs.analytics) {\n      // Initialize Google Analytics or other analytics here\n      console.log('[Cookie Consent] Analytics cookies enabled')\n    }\n\n    // Initialize marketing if accepted\n    if (prefs.marketing) {\n      // Initialize marketing cookies here\n      console.log('[Cookie Consent] Marketing cookies enabled')\n    }\n\n    // Hide banner\n    setShowBanner(false)\n    setShowSettings(false)\n  }\n\n  if (!showBanner) return null\n\n  return (\n    <>\n      {/* Backdrop */}\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 z-40\" />\n\n      {/* Cookie Banner */}\n      <div className=\"fixed bottom-0 left-0 right-0 z-50 p-4 sm:p-6\">\n        <div className=\"max-w-6xl mx-auto bg-white rounded-lg shadow-2xl border border-gray-200\">\n          {/* Main Banner */}\n          {!showSettings ? (\n            <div className=\"p-6\">\n              <div className=\"flex items-start gap-4\">\n                {/* Cookie Icon */}\n                <div className=\"flex-shrink-0 text-4xl\">üç™</div>\n\n                {/* Content */}\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\n                    We Value Your Privacy\n                  </h3>\n                  <p className=\"text-gray-600 text-sm mb-4\">\n                    We use cookies to enhance your browsing experience, serve personalized content,\n                    and analyze our traffic. By clicking \"Accept All\", you consent to our use of\n                    cookies. You can customize your preferences or accept only necessary cookies.\n                  </p>\n                  <p className=\"text-gray-600 text-sm mb-4\">\n                    Read our{' '}\n                    <Link href=\"/privacy\" className=\"text-blue-600 hover:underline font-semibold\">\n                      Privacy Policy\n                    </Link>{' '}\n                    and{' '}\n                    <Link href=\"/terms\" className=\"text-blue-600 hover:underline font-semibold\">\n                      Terms of Service\n                    </Link>{' '}\n                    for more information.\n                  </p>\n\n                  {/* Buttons */}\n                  <div className=\"flex flex-wrap gap-3\">\n                    <button\n                      onClick={acceptAll}\n                      className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors\"\n                    >\n                      Accept All\n                    </button>\n                    <button\n                      onClick={acceptNecessary}\n                      className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-semibold transition-colors\"\n                    >\n                      Necessary Only\n                    </button>\n                    <button\n                      onClick={() => setShowSettings(true)}\n                      className=\"bg-white hover:bg-gray-50 text-gray-700 px-6 py-2 rounded-lg border border-gray-300 font-semibold transition-colors\"\n                    >\n                      Customize\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            /* Settings Panel */\n            <div className=\"p-6\">\n              <div className=\"flex items-start gap-4 mb-6\">\n                <div className=\"flex-shrink-0 text-4xl\">‚öôÔ∏è</div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Cookie Preferences</h3>\n                  <p className=\"text-gray-600 text-sm\">\n                    Choose which cookies you want to accept. Necessary cookies cannot be disabled\n                    as they are required for the website to function.\n                  </p>\n                </div>\n              </div>\n\n              {/* Cookie Categories */}\n              <div className=\"space-y-4 mb-6\">\n                {/* Necessary Cookies */}\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={true}\n                        disabled\n                        className=\"w-5 h-5 rounded border-gray-300\"\n                      />\n                      <div>\n                        <h4 className=\"font-semibold text-gray-900\">\n                          Necessary Cookies{' '}\n                          <span className=\"text-xs text-gray-500 font-normal\">(Required)</span>\n                        </h4>\n                        <p className=\"text-sm text-gray-600\">\n                          Essential for the website to function. These cookies enable core\n                          functionality such as security, authentication, and session management.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Analytics Cookies */}\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={preferences.analytics}\n                        onChange={(e) =>\n                          setPreferences({ ...preferences, analytics: e.target.checked })\n                        }\n                        className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <div>\n                        <h4 className=\"font-semibold text-gray-900\">Analytics Cookies</h4>\n                        <p className=\"text-sm text-gray-600\">\n                          Help us understand how visitors interact with our website. We use this\n                          data to improve user experience and site performance.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Marketing Cookies */}\n                <div className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-3\">\n                      <input\n                        type=\"checkbox\"\n                        checked={preferences.marketing}\n                        onChange={(e) =>\n                          setPreferences({ ...preferences, marketing: e.target.checked })\n                        }\n                        className=\"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <div>\n                        <h4 className=\"font-semibold text-gray-900\">Marketing Cookies</h4>\n                        <p className=\"text-sm text-gray-600\">\n                          Used to track visitors across websites to display relevant advertisements\n                          and measure campaign effectiveness.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"flex flex-wrap gap-3\">\n                <button\n                  onClick={saveCustomPreferences}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors\"\n                >\n                  Save Preferences\n                </button>\n                <button\n                  onClick={acceptAll}\n                  className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-semibold transition-colors\"\n                >\n                  Accept All\n                </button>\n                <button\n                  onClick={() => setShowSettings(false)}\n                  className=\"bg-white hover:bg-gray-50 text-gray-700 px-6 py-2 rounded-lg border border-gray-300 font-semibold transition-colors\"\n                >\n                  Back\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </>\n  )\n}\n\n/**\n * Hook to check if user has consented to a specific cookie type\n */\nexport function useCookieConsent(type: keyof CookiePreferences): boolean {\n  const [hasConsent, setHasConsent] = useState(false)\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return\n    \n    const consent = localStorage.getItem('cookieConsent')\n    if (consent) {\n      try {\n        const preferences: CookiePreferences = JSON.parse(consent)\n        setHasConsent(preferences[type] || false)\n      } catch (error) {\n        setHasConsent(false)\n      }\n    }\n  }, [type])\n\n  return hasConsent\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/app/error-suppressor.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect } from 'react'\n\nexport function ErrorSuppressor() {\n  useEffect(() => {\n    // Disable Next.js error overlay for wallet errors\n    if (typeof window !== 'undefined') {\n      // @ts-ignore - Next.js internal API\n      window.__NEXT_DATA__ = window.__NEXT_DATA__ || {}\n      // @ts-ignore\n      window.next = window.next || {}\n      // @ts-ignore\n      window.next.router = window.next.router || {}\n    }\n\n    // Suppress wallet extension errors that don't affect functionality\n    const originalError = console.error\n    const originalWarn = console.warn\n\n    console.error = (...args: any[]) => {\n      const errorString = args.join(' ')\n\n      // Suppress specific React state update errors\n      if (\n        errorString.includes('Cannot update a component') ||\n        errorString.includes('while rendering a different component') ||\n        errorString.includes('AdminLayout') ||\n        errorString.includes('Router') ||\n        errorString.includes('setState() call inside')\n      ) {\n        return // Suppress React state update warnings\n      }\n\n      // Suppress specific wallet extension errors and development errors\n      if (\n        errorString.includes('chrome-extension://') ||\n        errorString.includes('pelagus') ||\n        errorString.includes('quiknode.pro') ||\n        errorString.includes('401') ||\n        errorString.includes('Unauthorized') ||\n        errorString.includes('injectScript.js') ||\n        errorString.includes('inpage.js') ||\n        errorString.includes('Object.connect') ||\n        errorString.includes('async s') ||\n        errorString.includes('__nextjs_original-stack-frame') ||\n        errorString.includes('stack-frame.js') ||\n        errorString.includes('provider-bridge.js') ||\n        errorString.includes('content.js') ||\n        errorString.includes('Cannot read properties of undefined') ||\n        errorString.includes('Cannot read property') ||\n        errorString.includes('is not defined') ||\n        errorString.includes('Error setting cookie') ||\n        errorString.includes('Error deleting cookie') ||\n        errorString.includes('Error decoding token')\n      ) {\n        return // Suppress these errors completely\n      }\n\n      // Suppress empty API error objects\n      if (errorString.includes('API Error:') && (errorString.includes('{}') || errorString.includes('[object Object]'))) {\n        return\n      }\n\n      // Log all other errors normally\n      originalError.apply(console, args)\n    }\n\n    console.warn = (...args: any[]) => {\n      const warnString = args.join(' ')\n\n      // Suppress wallet extension warnings and React warnings we've handled\n      if (\n        warnString.includes('chrome-extension://') ||\n        warnString.includes('pelagus') ||\n        warnString.includes('quiknode.pro') ||\n        warnString.includes('Cannot update a component') ||\n        warnString.includes('setState()') ||\n        warnString.includes('while rendering a different component') ||\n        warnString.includes('AdminLayout') ||\n        warnString.includes('Router') ||\n        warnString.includes('provider-bridge.js') ||\n        warnString.includes('MetaMask') ||\n        warnString.includes('Failed to connect') ||\n        warnString.includes('wallet') ||\n        warnString.includes('ethereum')\n      ) {\n        return // Suppress these warnings completely\n      }\n\n      // Log all other warnings normally\n      originalWarn.apply(console, args)\n    }\n\n    // Suppress unhandled promise rejections from wallet extensions\n    const handleUnhandledRejection = (event: PromiseRejectionEvent) => {\n      const reason = event.reason?.message || event.reason?.toString() || ''\n      \n      if (\n        reason.includes('Failed to connect to MetaMask') ||\n        reason.includes('MetaMask extension not found') ||\n        reason.includes('chrome-extension://') ||\n        reason.includes('inpage.js') ||\n        reason.includes('injectScript.js') ||\n        reason.includes('Cannot read properties of undefined') ||\n        reason.includes('Cannot read property')\n      ) {\n        event.preventDefault() // Suppress the error\n        return\n      }\n    }\n\n    // Global error handler for runtime errors\n    const handleError = (event: ErrorEvent) => {\n      const errorMessage = event.message || ''\n      const filename = event.filename || ''\n\n      // More comprehensive MetaMask/wallet error detection\n      const isWalletError =\n        errorMessage.includes('Cannot read properties of undefined') ||\n        errorMessage.includes('Cannot read property') ||\n        errorMessage.includes('is not defined') ||\n        errorMessage.includes('chrome-extension://') ||\n        errorMessage.includes('MetaMask') ||\n        errorMessage.includes('Failed to connect') ||\n        errorMessage.includes('wallet') ||\n        errorMessage.toLowerCase().includes('ethereum') ||\n        filename.includes('chrome-extension://') ||\n        filename.includes('inpage.js') ||\n        filename.includes('nkbihfbeogaeaoehlefnkodbefgpgknn')\n\n      if (isWalletError) {\n        // Completely suppress the error - don't even log to console\n        event.preventDefault()\n        event.stopPropagation()\n        event.stopImmediatePropagation()\n        return false\n      }\n    }\n\n    // Intercept fetch requests to prevent Next.js from fetching stack frames\n    const originalFetch = window.fetch\n    window.fetch = function(...args: any[]) {\n      const url = args[0]?.toString() || ''\n\n      // Block Next.js stack frame requests for wallet errors\n      if (url.includes('__nextjs_original-stack-frame') &&\n          (url.includes('chrome-extension') ||\n           url.includes('MetaMask') ||\n           url.includes('inpage.js'))) {\n        // Return empty promise to prevent the request\n        return Promise.reject(new Error('Blocked stack frame request for wallet error'))\n      }\n\n      return originalFetch.apply(window, args)\n    }\n\n    // Use capture phase to catch errors early\n    window.addEventListener('unhandledrejection', handleUnhandledRejection, true)\n    window.addEventListener('error', handleError, true)\n\n    return () => {\n      console.error = originalError\n      console.warn = originalWarn\n      window.fetch = originalFetch\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection, true)\n      window.removeEventListener('error', handleError, true)\n    }\n  }, [])\n\n  return null\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 683, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/lib/auth.ts"],"sourcesContent":["/**\n * Improved token management with better error handling and debugging\n */\nexport function getTokenFromStorage(): string | null {\n  if (typeof window === 'undefined') return null\n  \n  try {\n    // Try to get from localStorage first\n    let token = localStorage.getItem('token')\n    \n    // If not in localStorage, try to get from cookie\n    if (!token) {\n      token = getCookie('token')\n      if (token) {\n        // Sync to localStorage for faster access\n        try {\n          localStorage.setItem('token', token)\n          console.log('üîÑ Token synced from cookie to localStorage')\n        } catch (e) {\n          console.warn('‚ö†Ô∏è Could not sync token to localStorage:', e)\n        }\n      }\n    }\n    \n    if (token) {\n      console.log('‚úÖ Token found in storage')\n    } else {\n      console.log('‚ùå No token found in storage or cookies')\n    }\n    \n    return token\n  } catch (error) {\n    console.error('‚ùå Error getting token from storage:', error)\n    // Fallback to cookie only\n    return getCookie('token')\n  }\n}\n\nexport function setTokenToStorage(token: string): void {\n  if (typeof window === 'undefined') return\n  \n  try {\n    // Store in localStorage\n    localStorage.setItem('token', token)\n    \n    // Also set in cookie with longer expiration for middleware\n    setCookie('token', token, 7) // 7 days\n    \n    console.log('‚úÖ Token stored in localStorage and cookie')\n  } catch (error) {\n    console.error('‚ùå Error storing token:', error)\n    // Try to at least set the cookie\n    try {\n      setCookie('token', token, 7)\n      console.log('‚úÖ Token stored in cookie only')\n    } catch (cookieError) {\n      console.error('‚ùå Failed to store token anywhere:', cookieError)\n    }\n  }\n}\n\nexport function removeTokenFromStorage(): void {\n  if (typeof window === 'undefined') return\n  \n  try {\n    // Clear localStorage\n    localStorage.removeItem('token')\n    localStorage.removeItem('refreshToken')\n    \n    // Clear cookies\n    deleteCookie('token')\n    deleteCookie('refreshToken')\n    \n    console.log('‚úÖ All tokens cleared from storage and cookies')\n  } catch (error) {\n    console.error('‚ùå Error clearing tokens:', error)\n  }\n}\n\nexport function getRefreshTokenFromStorage(): string | null {\n  if (typeof window === 'undefined') return null\n  \n  try {\n    let refreshToken = localStorage.getItem('refreshToken')\n    \n    if (!refreshToken) {\n      refreshToken = getCookie('refreshToken')\n      if (refreshToken) {\n        try {\n          localStorage.setItem('refreshToken', refreshToken)\n        } catch (e) {\n          // localStorage might be full or disabled\n        }\n      }\n    }\n    \n    return refreshToken\n  } catch (error) {\n    // localStorage might be disabled or unavailable\n    return getCookie('refreshToken')\n  }\n}\n\nexport function setRefreshTokenToStorage(token: string): void {\n  if (typeof window === 'undefined') return\n  \n  try {\n    localStorage.setItem('refreshToken', token)\n    setCookie('refreshToken', token, 30) // 30 days for refresh token\n  } catch (error) {\n    // Silent fail - no need to log in production\n  }\n}\n\n// Cookie helper functions\nfunction getCookie(name: string): string | null {\n  if (typeof document === 'undefined') return null\n  \n  try {\n    const value = `; ${document.cookie}`\n    const parts = value.split(`; ${name}=`)\n    if (parts.length === 2) {\n      const part = parts.pop()\n      if (part) {\n        const cookieValue = part.split(';').shift()\n        return cookieValue || null\n      }\n    }\n    return null\n  } catch (error) {\n    // Silently handle cookie parsing errors\n    return null\n  }\n}\n\nfunction setCookie(name: string, value: string, days: number): void {\n  if (typeof document === 'undefined') return\n  \n  try {\n    const expires = new Date()\n    expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000)\n    document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/;SameSite=Lax`\n  } catch (error) {\n    // Silently handle cookie setting errors\n    console.error('Error setting cookie:', error)\n  }\n}\n\nfunction deleteCookie(name: string): void {\n  if (typeof document === 'undefined') return\n  \n  try {\n    document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`\n  } catch (error) {\n    // Silently handle cookie deletion errors\n    console.error('Error deleting cookie:', error)\n  }\n}\n\nexport function isAuthenticated(): boolean {\n  const token = getTokenFromStorage()\n  return !!token\n}\n\nexport function getUserFromToken(): any {\n  // Token verification should be done server-side\n  // This is just for client-side checks\n  const token = getTokenFromStorage()\n  if (!token) return null\n  \n  try {\n    // Decode JWT without verification (client-side only)\n    const parts = token.split('.')\n    if (parts.length !== 3) return null\n    \n    const base64Url = parts[1]\n    if (!base64Url) return null\n    \n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/')\n    const jsonPayload = decodeURIComponent(\n      atob(base64)\n        .split('')\n        .map(function(c) {\n          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n        })\n        .join('')\n    )\n    return JSON.parse(jsonPayload)\n  } catch (error) {\n    console.error('Error decoding token:', error)\n    return null\n  }\n}\n\nexport function isAdmin(): boolean {\n  const user = getUserFromToken()\n  return user?.isAdmin === true\n}\n\nexport async function validateToken(token: string): Promise<boolean> {\n  if (!token) return false\n\n  try {\n    // Make a request to validate the token with the server\n    const response = await fetch('/api/auth/validate', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    })\n\n    if (response.ok) {\n      const data = await response.json()\n      return data.valid === true\n    }\n\n    return false\n  } catch (error) {\n    // Silent fail - token validation failed\n    return false\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/hooks/useTokenRefresh.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useCallback, useRef } from 'react'\r\nimport { \r\n  getTokenFromStorage, \r\n  getRefreshTokenFromStorage,\r\n  setTokenToStorage,\r\n  setRefreshTokenToStorage,\r\n  removeTokenFromStorage\r\n} from '@/lib/auth'\r\nimport jwt from 'jsonwebtoken'\r\n\r\nexport function useTokenRefresh() {\r\n  const refreshTimeoutRef = useRef<NodeJS.Timeout>()\r\n\r\n  const refreshToken = useCallback(async () => {\r\n    try {\r\n      const currentRefreshToken = getRefreshTokenFromStorage()\r\n      \r\n      if (!currentRefreshToken) {\r\n        console.log('No refresh token available')\r\n        return false\r\n      }\r\n\r\n      console.log('Attempting to refresh token...')\r\n      const response = await fetch('/api/auth/refresh', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refreshToken: currentRefreshToken }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        console.error('Token refresh failed:', response.status, response.statusText)\r\n        // Only logout if it's definitely a 401/403, not network errors\r\n        if (response.status === 401 || response.status === 403) {\r\n          removeTokenFromStorage()\r\n          window.location.href = '/login?session_expired=true'\r\n        }\r\n        return false\r\n      }\r\n\r\n      const data = await response.json()\r\n      \r\n      if (data.token && data.refreshToken) {\r\n        setTokenToStorage(data.token)\r\n        setRefreshTokenToStorage(data.refreshToken)\r\n        console.log('Token refreshed successfully')\r\n        scheduleNextRefresh(data.token)\r\n        return true\r\n      }\r\n\r\n      console.error('Token refresh response missing tokens')\r\n      return false\r\n    } catch (error) {\r\n      console.error('Error refreshing token:', error)\r\n      // Don't auto-logout on network errors, just try again later\r\n      return false\r\n    }\r\n  }, [])\r\n\r\n  const scheduleNextRefresh = useCallback((token: string) => {\r\n    try {\r\n      const decoded = jwt.decode(token) as any\r\n      if (!decoded?.exp) return\r\n\r\n      const now = Math.floor(Date.now() / 1000)\r\n      const expiresIn = decoded.exp - now\r\n      \r\n      // Refresh 10 minutes before expiration, but at least 2 minutes\r\n      const refreshIn = Math.max(expiresIn - 600, 120)\r\n      \r\n      if (refreshTimeoutRef.current) {\r\n        clearTimeout(refreshTimeoutRef.current)\r\n      }\r\n\r\n      console.log(`Scheduling token refresh in ${Math.floor(refreshIn / 60)} minutes`)\r\n      \r\n      refreshTimeoutRef.current = setTimeout(() => {\r\n        refreshToken()\r\n      }, refreshIn * 1000)\r\n    } catch (error) {\r\n      console.error('Error scheduling token refresh:', error)\r\n    }\r\n  }, [refreshToken])\r\n\r\n  useEffect(() => {\r\n    const token = getTokenFromStorage()\r\n    if (token) {\r\n      scheduleNextRefresh(token)\r\n    }\r\n\r\n    return () => {\r\n      if (refreshTimeoutRef.current) {\r\n        clearTimeout(refreshTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [scheduleNextRefresh])\r\n\r\n  return { refreshToken }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAOA;;AAVA;;;;AAYO,SAAS;;IACd,MAAM,oBAAoB,IAAA,uKAAM;IAEhC,MAAM,eAAe,IAAA,4KAAW;qDAAC;YAC/B,IAAI;gBACF,MAAM,sBAAsB,IAAA,4IAA0B;gBAEtD,IAAI,CAAC,qBAAqB;oBACxB,QAAQ,GAAG,CAAC;oBACZ,OAAO;gBACT;gBAEA,QAAQ,GAAG,CAAC;gBACZ,MAAM,WAAW,MAAM,MAAM,qBAAqB;oBAChD,QAAQ;oBACR,SAAS;wBACP,gBAAgB;oBAClB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE,cAAc;oBAAoB;gBAC3D;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAChB,QAAQ,KAAK,CAAC,yBAAyB,SAAS,MAAM,EAAE,SAAS,UAAU;oBAC3E,+DAA+D;oBAC/D,IAAI,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,KAAK;wBACtD,IAAA,wIAAsB;wBACtB,OAAO,QAAQ,CAAC,IAAI,GAAG;oBACzB;oBACA,OAAO;gBACT;gBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;gBAEhC,IAAI,KAAK,KAAK,IAAI,KAAK,YAAY,EAAE;oBACnC,IAAA,mIAAiB,EAAC,KAAK,KAAK;oBAC5B,IAAA,0IAAwB,EAAC,KAAK,YAAY;oBAC1C,QAAQ,GAAG,CAAC;oBACZ,oBAAoB,KAAK,KAAK;oBAC9B,OAAO;gBACT;gBAEA,QAAQ,KAAK,CAAC;gBACd,OAAO;YACT,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,4DAA4D;gBAC5D,OAAO;YACT;QACF;oDAAG,EAAE;IAEL,MAAM,sBAAsB,IAAA,4KAAW;4DAAC,CAAC;YACvC,IAAI;gBACF,MAAM,UAAU,mJAAG,CAAC,MAAM,CAAC;gBAC3B,IAAI,CAAC,SAAS,KAAK;gBAEnB,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;gBACpC,MAAM,YAAY,QAAQ,GAAG,GAAG;gBAEhC,+DAA+D;gBAC/D,MAAM,YAAY,KAAK,GAAG,CAAC,YAAY,KAAK;gBAE5C,IAAI,kBAAkB,OAAO,EAAE;oBAC7B,aAAa,kBAAkB,OAAO;gBACxC;gBAEA,QAAQ,GAAG,CAAC,CAAC,4BAA4B,EAAE,KAAK,KAAK,CAAC,YAAY,IAAI,QAAQ,CAAC;gBAE/E,kBAAkB,OAAO,GAAG;wEAAW;wBACrC;oBACF;uEAAG,YAAY;YACjB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mCAAmC;YACnD;QACF;2DAAG;QAAC;KAAa;IAEjB,IAAA,0KAAS;qCAAC;YACR,MAAM,QAAQ,IAAA,qIAAmB;YACjC,IAAI,OAAO;gBACT,oBAAoB;YACtB;YAEA;6CAAO;oBACL,IAAI,kBAAkB,OAAO,EAAE;wBAC7B,aAAa,kBAAkB,OAAO;oBACxC;gBACF;;QACF;oCAAG;QAAC;KAAoB;IAExB,OAAO;QAAE;IAAa;AACxB;GAzFgB"}},
    {"offset": {"line": 1011, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/components/providers.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { useState, useEffect } from 'react';\r\nimport { useTokenRefresh } from '@/hooks/useTokenRefresh';\r\nimport dynamic from 'next/dynamic';\r\nconst WEB3_DISABLED = process.env.NEXT_PUBLIC_WEB3_DISABLED === 'true' || process.env.WEB3_DISABLED === 'true'\r\n\r\n// Dynamically import WagmiConfig to avoid SSR issues (only when web3 enabled)\r\nconst WagmiConfig = !WEB3_DISABLED\r\n  ? dynamic(() => import('wagmi').then(mod => mod.WagmiConfig), { ssr: false })\r\n  : null\r\n\r\nfunction TokenRefreshProvider({ children }: { children: React.ReactNode }) {\r\n  useTokenRefresh();\r\n  return <>{children}</>;\r\n}\r\n\r\nexport function Providers({ children }: { children: React.ReactNode }) {\r\n  const [queryClient] = useState(\r\n    () =>\r\n      new QueryClient({\r\n        defaultOptions: {\r\n          queries: {\r\n            staleTime: 60 * 1000, // 1 minute\r\n            refetchOnWindowFocus: false,\r\n            retry: 1,\r\n          },\r\n        },\r\n      })\r\n  );\r\n\r\n  const [wagmiConfig, setWagmiConfig] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    // Only load wagmi config on client side\r\n    if (typeof window !== 'undefined' && !WEB3_DISABLED) {\r\n      import('@/lib/wagmi-config').then(({ wagmiConfig }) => {\r\n        setWagmiConfig(wagmiConfig);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <TokenRefreshProvider>\r\n        {wagmiConfig ? (\r\n          <WagmiConfig config={wagmiConfig}>\r\n            {children}\r\n          </WagmiConfig>\r\n        ) : (\r\n          children\r\n        )}\r\n      </TokenRefreshProvider>\r\n    </QueryClientProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAMsB;;AAJtB;AAAA;AACA;AACA;AACA;;;;AALA;;;;;AAMA,MAAM,gBAAgB,2KAAO,CAAC,GAAG,CAAC,yBAAyB,KAAK,UAAU,2KAAO,CAAC,GAAG,CAAC,aAAa,KAAK;AAExG,8EAA8E;AAC9E,MAAM,cAAc,CAAC,gBACjB,IAAA,6KAAO,EAAC,IAAM,kIAAgB,IAAI,CAAC,CAAA,MAAO,IAAI,WAAW;;;;;;IAAK,KAAK;KACnE;AAEJ,SAAS,qBAAqB,EAAE,QAAQ,EAAiC;;IACvE,IAAA,8IAAe;IACf,qBAAO;kBAAG;;AACZ;GAHS;;QACP,8IAAe;;;KADR;AAKF,SAAS,UAAU,EAAE,QAAQ,EAAiC;;IACnE,MAAM,CAAC,YAAY,GAAG,IAAA,yKAAQ;8BAC5B,IACE,IAAI,+LAAW,CAAC;gBACd,gBAAgB;oBACd,SAAS;wBACP,WAAW,KAAK;wBAChB,sBAAsB;wBACtB,OAAO;oBACT;gBACF;YACF;;IAGJ,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAM;IAEpD,IAAA,0KAAS;+BAAC;YACR,wCAAwC;YACxC,IAAI,+CAAkB,eAAe,CAAC,eAAe;gBACnD,iGAA6B,IAAI;2CAAC,CAAC,EAAE,WAAW,EAAE;wBAChD,eAAe;oBACjB;;YACF;QACF;8BAAG,EAAE;IAEL,qBACE,6LAAC,gNAAmB;QAAC,QAAQ;kBAC3B,cAAA,6LAAC;sBACE,4BACC,6LAAC;gBAAY,QAAQ;0BAClB;;;;;uBAGH;;;;;;;;;;;AAKV;IAtCgB;MAAA"}},
    {"offset": {"line": 1113, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/lib/client-error-handler.ts"],"sourcesContent":["/**\r\n * Client-Side Global Error Handler\r\n * Sets up handlers for unhandled errors and promise rejections on the client\r\n */\r\n\r\n/**\r\n * Handle unhandled promise rejections\r\n */\r\nexport function setupGlobalErrorHandlers() {\r\n  if (typeof window === 'undefined') {\r\n    return // Server-side, no need to setup\r\n  }\r\n\r\n  // Handle unhandled promise rejections\r\n  window.addEventListener('unhandledrejection', (event) => {\r\n    console.error('Unhandled promise rejection:', event.reason)\r\n\r\n    // Check if it's a MetaMask error\r\n    if (event.reason?.message?.includes('MetaMask') || event.reason?.message?.includes('connect')) {\r\n      console.warn('MetaMask error caught globally:', event.reason.message)\r\n      // Prevent the error from crashing the app\r\n      event.preventDefault()\r\n\r\n      // Show a user-friendly message\r\n      const message = 'A wallet connection error occurred. Please refresh the page or try using QR Code payment.'\r\n\r\n      // Try to display a toast if available\r\n      try {\r\n        const customEvent = new CustomEvent('global-error', {\r\n          detail: { message, type: 'wallet' }\r\n        })\r\n        window.dispatchEvent(customEvent)\r\n      } catch (err) {\r\n        console.error('Failed to dispatch global error event:', err)\r\n      }\r\n\r\n      return\r\n    }\r\n\r\n    // Check if it's a network error\r\n    if (\r\n      event.reason?.message?.includes('fetch') ||\r\n      event.reason?.message?.includes('network') ||\r\n      event.reason?.code === 'ERR_NETWORK'\r\n    ) {\r\n      console.warn('Network error caught globally:', event.reason.message)\r\n      event.preventDefault()\r\n      return\r\n    }\r\n\r\n    // For other errors, let them be handled normally but log them\r\n    // Don't prevent default for non-wallet errors to maintain normal error flow\r\n  })\r\n\r\n  // Handle global errors (including from extensions)\r\n  window.addEventListener('error', (event) => {\r\n    // Check if it's from MetaMask extension or contains MetaMask errors\r\n    const isMetaMaskError =\r\n      event.filename?.includes('chrome-extension') ||\r\n      event.filename?.includes('inpage.js') ||\r\n      event.message?.includes('MetaMask') ||\r\n      event.message?.includes('Failed to connect to MetaMask') ||\r\n      event.message?.toLowerCase().includes('wallet') ||\r\n      event.message?.toLowerCase().includes('ethereum')\r\n\r\n    if (isMetaMaskError) {\r\n      console.warn('üõë MetaMask/Wallet extension error intercepted:', event.message)\r\n\r\n      // Prevent the error from showing to user\r\n      event.preventDefault()\r\n      event.stopPropagation()\r\n      event.stopImmediatePropagation()\r\n\r\n      // Log for debugging but don't crash\r\n      console.debug('Error details:', {\r\n        message: event.message,\r\n        filename: event.filename,\r\n        lineno: event.lineno,\r\n        colno: event.colno\r\n      })\r\n\r\n      // Don't even show a toast - just silently handle it\r\n      // User can use QR code payment if wallet doesn't work\r\n\r\n      return false // Prevent default error handling\r\n    }\r\n  }, true) // Use capture phase to intercept earlier\r\n\r\n  // Additional safeguard: Handle errors from specific extension sources\r\n  const originalConsoleError = console.error\r\n  console.error = function(...args: any[]) {\r\n    // Suppress MetaMask-related console errors\r\n    const errorString = args.join(' ')\r\n    if (\r\n      errorString.includes('chrome-extension') ||\r\n      errorString.includes('Failed to connect to MetaMask') ||\r\n      errorString.includes('inpage.js')\r\n    ) {\r\n      console.debug('üîï Suppressed MetaMask extension error:', ...args)\r\n      return\r\n    }\r\n    // Call original console.error for non-wallet errors\r\n    originalConsoleError.apply(console, args)\r\n  }\r\n\r\n  console.log('üõ°Ô∏è Global error handlers initialized')\r\n}\r\n\r\n/**\r\n * Clean up global error handlers\r\n */\r\nexport function cleanupGlobalErrorHandlers() {\r\n  if (typeof window === 'undefined') {\r\n    return\r\n  }\r\n\r\n  // Remove event listeners if needed\r\n  // Note: We don't remove them by default as they should persist\r\n  // But this function is here if you need to clean up during unmount\r\n}\r\n\r\n/**\r\n * Manually dispatch an error event\r\n */\r\nexport function dispatchGlobalError(message: string, type: string = 'general') {\r\n  if (typeof window === 'undefined') {\r\n    return\r\n  }\r\n\r\n  try {\r\n    const event = new CustomEvent('global-error', {\r\n      detail: { message, type }\r\n    })\r\n    window.dispatchEvent(event)\r\n  } catch (err) {\r\n    console.error('Failed to dispatch global error:', err)\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;CAEC;;;;;;;;AACM,SAAS;IACd;;IAIA,sCAAsC;IACtC,OAAO,gBAAgB,CAAC,sBAAsB,CAAC;QAC7C,QAAQ,KAAK,CAAC,gCAAgC,MAAM,MAAM;QAE1D,iCAAiC;QACjC,IAAI,MAAM,MAAM,EAAE,SAAS,SAAS,eAAe,MAAM,MAAM,EAAE,SAAS,SAAS,YAAY;YAC7F,QAAQ,IAAI,CAAC,mCAAmC,MAAM,MAAM,CAAC,OAAO;YACpE,0CAA0C;YAC1C,MAAM,cAAc;YAEpB,+BAA+B;YAC/B,MAAM,UAAU;YAEhB,sCAAsC;YACtC,IAAI;gBACF,MAAM,cAAc,IAAI,YAAY,gBAAgB;oBAClD,QAAQ;wBAAE;wBAAS,MAAM;oBAAS;gBACpC;gBACA,OAAO,aAAa,CAAC;YACvB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,0CAA0C;YAC1D;YAEA;QACF;QAEA,gCAAgC;QAChC,IACE,MAAM,MAAM,EAAE,SAAS,SAAS,YAChC,MAAM,MAAM,EAAE,SAAS,SAAS,cAChC,MAAM,MAAM,EAAE,SAAS,eACvB;YACA,QAAQ,IAAI,CAAC,kCAAkC,MAAM,MAAM,CAAC,OAAO;YACnE,MAAM,cAAc;YACpB;QACF;IAEA,8DAA8D;IAC9D,4EAA4E;IAC9E;IAEA,mDAAmD;IACnD,OAAO,gBAAgB,CAAC,SAAS,CAAC;QAChC,oEAAoE;QACpE,MAAM,kBACJ,MAAM,QAAQ,EAAE,SAAS,uBACzB,MAAM,QAAQ,EAAE,SAAS,gBACzB,MAAM,OAAO,EAAE,SAAS,eACxB,MAAM,OAAO,EAAE,SAAS,oCACxB,MAAM,OAAO,EAAE,cAAc,SAAS,aACtC,MAAM,OAAO,EAAE,cAAc,SAAS;QAExC,IAAI,iBAAiB;YACnB,QAAQ,IAAI,CAAC,mDAAmD,MAAM,OAAO;YAE7E,yCAAyC;YACzC,MAAM,cAAc;YACpB,MAAM,eAAe;YACrB,MAAM,wBAAwB;YAE9B,oCAAoC;YACpC,QAAQ,KAAK,CAAC,kBAAkB;gBAC9B,SAAS,MAAM,OAAO;gBACtB,UAAU,MAAM,QAAQ;gBACxB,QAAQ,MAAM,MAAM;gBACpB,OAAO,MAAM,KAAK;YACpB;YAEA,oDAAoD;YACpD,sDAAsD;YAEtD,OAAO,MAAM,iCAAiC;;QAChD;IACF,GAAG,OAAM,yCAAyC;IAElD,sEAAsE;IACtE,MAAM,uBAAuB,QAAQ,KAAK;IAC1C,QAAQ,KAAK,GAAG,SAAS,GAAG,IAAW;QACrC,2CAA2C;QAC3C,MAAM,cAAc,KAAK,IAAI,CAAC;QAC9B,IACE,YAAY,QAAQ,CAAC,uBACrB,YAAY,QAAQ,CAAC,oCACrB,YAAY,QAAQ,CAAC,cACrB;YACA,QAAQ,KAAK,CAAC,8CAA8C;YAC5D;QACF;QACA,oDAAoD;QACpD,qBAAqB,KAAK,CAAC,SAAS;IACtC;IAEA,QAAQ,GAAG,CAAC;AACd;AAKO,SAAS;IACd;;AAIA,mCAAmC;AACnC,+DAA+D;AAC/D,mEAAmE;AACrE;AAKO,SAAS,oBAAoB,OAAe,EAAE,OAAe,SAAS;IAC3E;;IAIA,IAAI;QACF,MAAM,QAAQ,IAAI,YAAY,gBAAgB;YAC5C,QAAQ;gBAAE;gBAAS;YAAK;QAC1B;QACA,OAAO,aAAa,CAAC;IACvB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,oCAAoC;IACpD;AACF"}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Desktop/nsc-test/vercel-download/src/components/GlobalErrorHandler.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect } from 'react'\r\nimport { setupGlobalErrorHandlers } from '@/lib/client-error-handler'\r\n\r\n/**\r\n * Global Error Handler Component\r\n * Initializes global error handlers on mount\r\n * Should be included in the root layout\r\n */\r\nexport function GlobalErrorHandler() {\r\n  useEffect(() => {\r\n    // Set up global error handlers\r\n    setupGlobalErrorHandlers()\r\n  }, [])\r\n\r\n  // This component doesn't render anything\r\n  return null\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAUO,SAAS;;IACd,IAAA,0KAAS;wCAAC;YACR,+BAA+B;YAC/B,IAAA,gKAAwB;QAC1B;uCAAG,EAAE;IAEL,yCAAyC;IACzC,OAAO;AACT;GARgB;KAAA"}}]
}